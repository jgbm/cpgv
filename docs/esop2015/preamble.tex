\DeclareMathOperator{\dom}{dom}

%% \newcommand{\Cx}{\mathcal{C}}
%% \newcommand{\Ex}{\mathcal{E}}
%% \newcommand{\Fx}{\mathcal{F}}

\newcommand{\gvtimes}{\times} %\boldsymbol{\otimes}}
\newcommand{\gvplus}{+} %\boldsymbol{\oplus}}

\newcommand{\Cx}{G}
\newcommand{\Ex}{E}
\newcommand{\Fx}{F}

\newcommand{\one}{\mathbf{1}}
\newcommand{\zero}{\mathbf{0}}
\newcommand{\with}{\mathbin\binampersand}
\newcommand{\parr}{\mathbin\bindnasrepma}
\newcommand{\cpdual}[1]{#1^\perp}
\newcommand{\cpbang}[1]{{! #1}}
\newcommand{\cpquery}[1]{{? #1}}
\newcommand{\gvdual}[1]{\overline{#1}}
\newcommand{\channel}[1]{#1^\sharp}
\newcommand{\gvout}[2]{\ensuremath{{!#1.#2}}}
\newcommand{\gvin}[2]{\ensuremath{{?#1.#2}}}
\newcommand{\gvend}{\mkwd{end}}
\newcommand{\lto}{\ensuremath{\multimap}}
\newcommand{\gvforever}[1]{\ensuremath{\Box #1}}
\newcommand{\outterm}{\mkwd{end}_!}
\newcommand{\interm}{\mkwd{end}_?}
\newcommand{\gvserver}[1]{\flat #1}
\newcommand{\gvservice}[1]{\sharp #1}
\newcommand{\trule}[1]{(\textit{#1})}
\newcommand{\cptyp}[2]{#1 \vdash #2}
\newcommand{\gvtyp}[3]{#1 \vdash #2 : #3}

\newcommand{\defiff}{\stackrel{\mathrm{def}}{\iff}}
\newcommand{\defeq}{\triangleq}

\newcommand{\mapname}{\mathsf{map}}
\newcommand{\map}[3]{\mapname^{#1}_{#2}(#3)}
\newcommand{\gvmap}[3]{\mapname^{#1}_{#2}\:#3}

\newcommand{\teval}{\longrightarrow_V}
\newcommand{\ceval}{\longrightarrow}

\newcommand{\rto}{\longrightarrow}
\newcommand{\crto}{\longrightarrow_C}
\newcommand{\ccto}{\longrightarrow_{CC}}

\newcommand{\bigrto}{\Longrightarrow}
\newcommand{\bigcrto}{\Longrightarrow_C}
\newcommand{\bigccto}{\Longrightarrow_{CC}}

\newcommand{\fv}{\ensuremath{\mathsf{fv}}}

\newcommand{\bind}[2]{\ensuremath{#2 / #1}}

\newcommand{\mkwd}[1]{\mathsf{#1}}
\newcommand{\tkwd}[1]{\textsf{#1}}
\newcommand{\link}[2]{#1 \leftrightarrow #2}
\newcommand{\cut}[4]{\nu#1 \: (#3 \mid #4)}
\newcommand{\replicate}[2]{{!#1(#2)}}
\newcommand{\derelict}[2]{{?#1[#2]}}
\newcommand{\rec}[1]{\mkwd{rec}\:#1}
\newcommand{\corec}[4]{\mkwd{corec}\:{#1} \langle #2 \rangle (#3,#4)}
\newcommand{\corecf}[5]{\mkwd{corec}^{#1} #2 \langle #3 \rangle (#4,#5)}
\newcommand{\clabel}[1]{\mathit{#1}}
\renewcommand{\case}[2]{\mkwd{case}\:#1\:\{#2\}}
\newcommand{\sel}[2]{#1[\clabel{#2}]}
\newcommand{\gvsend}[1]{\gvconst{send} \app #1}
\newcommand{\gvreceive}[1]{\gvconst{receive} \app #1}
\newcommand{\gvlet}[3]{\mkwd{let}\;#1 = #2\;\mkwd{in}\;#3}
\newcommand{\gvletunit}[2]{#1; #2}
\newcommand{\gvconst}[1]{\ensuremath{\mathsf{#1}}}
\newcommand{\app}{\,}
\newcommand{\gvselect}[2]{\mkwd{select}\:#1\:#2}
\newcommand{\gvcase}[2]{\mkwd{case}\:#1\:\{#2\}}
\newcommand{\gvlink}[2]{\gvconst{link}\:(#1, #2)}
\newcommand{\gvfork}[2]{\gvconst{fork}\:(\lambda #1.#2)}
\newcommand{\gvwait}[1]{\gvconst{wait}\:#1}
%% \newcommand{\lrkwd}{\mkwd{cofix}}
%% \newcommand{\gvfix}[3]{\lrkwd\:#1\:#2 = #3}
%% \newcommand{\gvletrec}[4]{\gvlet{#1}{\gvfix{#1}{#2}{#3}}{#4}}
\newcommand{\gvserve}[2]{\gvconst{replicate} \app (\lambda #1.#2)}
\newcommand{\gvrequest}[1]{\gvconst{request} \app #1}

\newcommand{\gvifthen}[3]{\mkwd{if}\:#1\:\mkwd{then}\:#2\:\mkwd{else}\:#3}
\newcommand{\gvreceivek}[4]{\gvlet{({#1}, {#2})}{\gvreceive{#3}}{#4}}

\newcommand{\sd}[1]{\langle#1\rangle}

\newcommand{\clos}[3]{\lambda^{#1}\!#2.#3}

\newcommand{\true}{\mathrm{true}}
\newcommand{\false}{\mathrm{false}}

\newcommand{\key}{\mkwd}
\newcommand{\cofix}{\lrkwd}

\newcommand{\tocpbig}[1]{\left\llbracket #1 \right\rrbracket}
\newcommand{\togvbig}[1]{\stretchleftright{\llparenthesis}{#1}{\rrparenthesis}}

\newcommand{\tocpflip}[1]{\llceil{#1}\rrceil}

\newcommand{\tocp}[1]{\llbracket #1 \rrbracket}
\newcommand{\togv}[1]{\llparenthesis #1 \rrparenthesis}

% CP to GV configuration
%\newcommand{\togvc}[1]{\mathscr{C}\hspace{-.1ex}\togv{#1}}
\newcommand{\togvc}[1]{\mathcal{C}\togv{#1}}

\newcommand{\topi}[1]{({#1})^\star}

\newcommand{\un}{un}
\newcommand{\lin}{lin}

\newcommand{\mucp}{$\mu\mathrm{CP}$\xspace}
\newcommand{\mugv}{$\mu\mathrm{GV}$\xspace}
\newcommand{\gvpi}{$\mu\mathrm{GV}\pi$\xspace}

\newcommand{\ba}{\begin{array}}
\newcommand{\ea}{\end{array}}

\newcommand{\bl}{\ba[t]{@{}l@{}}}
\newcommand{\el}{\ea}

\newenvironment{code}{\small\[\bl}{\el\]\normalsize}

\newenvironment{equations}{\[\ba{@{}r@{~}c@{~}l@{}}}{\ea\]}
\newenvironment{eqs}{\ba{@{}r@{~}c@{~}l@{}}}{\ea}

\newenvironment{syntax}%
{\[\begin{array}{@{}lr@{\hspace{2px}}c@{\hspace{2px}}l}\ignorespaces}
{\end{array}\]\ignorespacesafterend}

\newcommand{\mcl}[2]{\multicolumn{#1}{l}{#2}}

\newcommand{\secref}[1]{(\S\ref{sec:#1})}
\newcommand{\lemref}[1]{Lemma~\ref{thm:#1}}
\newcommand{\thmref}[1]{Theorem~\ref{thm:#1}}
\newcommand{\figref}[1]{Figure~\ref{fig:#1}}

\newcommand{\todo}[1]{{\noindent\small\color{red} \framebox{\parbox{\dimexpr\linewidth-2\fboxsep-2\fboxrule}{\textbf{TODO:} #1}}}}
\newcommand{\nqed}{\ensuremath{\centernot\qed}}
